[gd_scene load_steps=4 format=2]

[ext_resource path="res://resource/projectiles/basic_laser.tres" type="Resource" id=1]
[ext_resource path="res://resource/weapons/basic_weapon.tres" type="Resource" id=2]

[sub_resource type="GDScript" id=1]
script/source = "extends Node2D

onready var timer:Timer = $Timer
export var weapon:Resource = null
export var projectile:Resource = null
onready var player = get_node(\"../..\")
onready var projectiles = player.get_node(\"Projectiles\")
const projectile_scene = preload(\"res://scenes/projectiles/laser/basic_laser.tscn\")

func _ready():
	timer.autostart = false
	timer.one_shot = true
	timer.wait_time = weapon.firerate
	
func fire():
	print(get_node(\"/root/World\"))
	if timer.is_stopped():
		var proj_scene = projectile_scene.instance()
		proj_scene.global_position = player.global_position
		projectiles.add_child(proj_scene)
		timer.start()
		print(\"Fire weapon\")
"

[node name="Weapon" type="Node2D"]
script = SubResource( 1 )
weapon = ExtResource( 2 )
projectile = ExtResource( 1 )

[node name="Timer" type="Timer" parent="."]
